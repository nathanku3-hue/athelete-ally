# 训练计划页面 (Training Plan Page) - V1 最终版

## 概述

根据详细的产品需求文档，我已经实现了一个平台自适应的、以用户为中心的训练计划视图。该页面能够根据用户设备（网页/移动端）提供最佳体验，以极简的方式呈现全局概览，同时让用户能轻松获取详细信息。

## 核心功能

### 1. 平台差异化布局

#### 网页版 (Desktop)
- **主从式双栏布局**：左栏显示本週训练导航菜单，右栏显示选中日期的详细训练内容
- **智能默认选择**：页面加载时自动选中并高亮当天的训练日，附带「Today」标识
- **动态内容更新**：点击左栏日期时，右栏内容实时更新

#### 移动端 (Mobile)
- **今日焦点仪表板**：单栏布局，绝对聚焦於當日訓練
- **核心动作展示**：巨大的「今日训练」卡片，直接显示當天要練的核心動作
- **快速开始**：醒目的「开始训练」按钮
- **週計畫導航**：提供查看本週計畫的次級導航

### 2. 共享UI组件

#### 页面顶部全局信息区 (Header)
- **週數標題**：極簡格式，例如 "Week 1: Foundation"
- **週總訓練量**：AI評估的分類指標，例如 "Volume: Mid"
- **疲勞度警報**：條件渲染，僅當疲勞度超過閾值時顯示
- **單位切換器**：LBS / KG 全局切換，所有重量數值立即響應變化
- **修改計畫按鈕**：導航至用戶的「Onboarding Summary Page」

#### 训练动作卡片 (Exercise Card)
- **動作信息**：名稱、組數、次數、重量
- **關鍵要點**：極簡提示語（Slow & Controlled、Fast & Explosive、Heavy & Focused）
- **智能交互**：
  - 網頁版：鼠標懸浮彈出詳細指導提示框
  - 移動端：點擊彈出詳細指導

### 3. 數據與內容

- **重量顯示**：所有重量均為AI生成的plannedWeight，嚴格遵循用戶選擇的LBS/KG單位偏好
- **動作提示庫**：從「訓練目標」到「極簡提示語」的映射關係
- **模擬數據**：包含完整的週訓練計畫示例數據

## 技術實現

### 架構設計
- **組件化設計**：Header、ExerciseCard等獨立可復用組件
- **平台檢測**：使用`useEffect`和`window.innerWidth`進行響應式檢測
- **狀態管理**：使用React Hooks進行本地狀態管理
- **類型安全**：完整的TypeScript類型定義

### 文件結構
```
src/app/plan/page.tsx
├── 類型定義 (Type Definitions)
├── 模擬數據 (Mock Data)
├── UI組件 (UI Components)
│   ├── Header
│   └── ExerciseCard
├── 平台差異化佈局 (Platform-Specific Layouts)
│   ├── DesktopLayout
│   └── MobileLayout
└── 主頁面組件 (Main Page Component)
```

## 使用方法

### 1. 訪問頁面
- 直接訪問：`/plan`
- 從首頁點擊「View Training Plan」按鈕

### 2. 功能操作
- **單位切換**：點擊Header中的LBS/KG按鈕
- **日期選擇**（桌面版）：點擊左欄的訓練日
- **動作詳情**：懸浮（桌面）或點擊（移動）動作卡片
- **修改計畫**：點擊「Modify Plan」按鈕

### 3. 響應式體驗
- **桌面版**：螢幕寬度 ≥ 768px 時顯示雙欄佈局
- **移動版**：螢幕寬度 < 768px 時顯示單欄焦點佈局

## 已實現功能

### ✅ 數據對接
1. **真實API調用**：已連接 `/api/v1/plans/current` 獲取用戶訓練計劃
2. **單位偏好持久化**：已實現 `/api/v1/user/preferences` 保存用戶LBS/KG選擇
3. **疲勞度狀態**：已集成 `/api/v1/fatigue/status` 獲取疲勞度數據

### ✅ 功能增強
1. **動作詳情**：已實現 `/api/v1/exercises/[exerciseId]` 提供詳細指導
2. **疲勞度評估**：已創建 `/fatigue-assessment` 頁面進行疲勞度測試
3. **智能交互**：桌面懸浮和移動點擊的動作詳情彈窗
4. **疲勞度警報**：高疲勞狀態時顯示詳細建議和推薦

## 未來擴展

### 功能增強
1. **訓練記錄**：集成訓練進度和完成狀態
2. **個性化調整**：基於用戶反饋的動態調整
3. **GIF動圖**：添加實際的動作演示視頻
4. **社交功能**：分享訓練進度和成就

## 代碼質量

- ✅ 無Linting錯誤
- ✅ 完整的TypeScript類型定義
- ✅ 響應式設計實現
- ✅ 組件化架構
- ✅ 平台差異化體驗
- ✅ 用戶體驗優化

## 測試建議

1. **桌面端測試**：驗證雙欄佈局和懸浮交互
2. **移動端測試**：驗證單欄佈局和點擊交互
3. **響應式測試**：調整瀏覽器窗口大小測試佈局切換
4. **單位切換測試**：驗證重量數值的即時轉換
5. **導航測試**：驗證各按鈕的導航功能

這個實現完全符合您的產品需求文檔，提供了一個功能完整、架構優良的訓練計畫頁面V1版本。
